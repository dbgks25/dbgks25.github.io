---
layout: null
permalink: /search/search.json
---

[
{% assign pages    = site.pages | where_exp: "p", "p.title" | where_exp: "p", "p.search != false" %}
{% assign posts    = site.collections['posts'].docs | where_exp: "p", "p.title" | where_exp: "p", "p.search != false" %}
{% assign projects = site.collections['projects'].docs | default: empty | where_exp: "p", "p.title" | where_exp: "p", "p.search != false" %}
{% assign items    = pages | concat: posts | concat: projects | sort: "title" %}

{% for item in items %}
  {
    "title": {{ item.title | jsonify }},
    "url": {{ item.url | relative_url | jsonify }},
    "date": {{ item.date | date_to_string | jsonify }},
    "content": {{ item.content | strip_html | normalize_whitespace | jsonify }},
    "tags": {{ item.tags | default: empty | jsonify }},
    "collection": {{ item.collection | default: "" | jsonify }}
  }{% unless forloop.last %},{% endunless %}
{% endfor %}
]
